{% extends 'base.html' %} {% block content %}
<div class>
  <div>
    <h1 class="h2"><i class="bi bi-list-ul me-2"></i>出荷一覧</h1>
  </div>
  <div class="card">
    <div class="card-header py-3">
      <h2 class="m-0 h4">出荷一覧</h2>
    </div>
    <div class="card-body">
      <table
        id="shipping_table"
        class="table table-dark table-striped table-hover w-100"
      >
        <thead>
          <tr>
            <th>出荷日</th>
            <th>品番</th>
            <th>品名</th>
            <th>注文番号</th>
            <th>単価</th>
            <th>出荷数</th>
          </tr>
        </thead>
        <tbody>
          {% for shipping in shippings %}
          <tr>
            <td>{{ shipping.shipping_date }}</td>
            <td>{{ shipping.item_no }}</td>
            <td>{{ shipping.item_name }}</td>
            <td>{{ shipping.order_no }}</td>
            <td>{{ shipping.unit_price }}</td>
            <td>{{ shipping.shipping_quantity }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock content %} {% block extra_js %}
<script>
  $(document).ready(function () {
    const url = "{% url 'shipping_list' %}";
    const table = new DataTable("#shipping_table", {
      ajax: {
        url: url,
        type: "POST",
        data: {
          kubun: "get_item",
        },
        headers: { "X-CSRFToken": "{{ csrf_token }}" },
      },
      columns: [
        { data: "shipping_date" },
        { data: "item_no" },
        { data: "item_name" },
        { data: "order_no" },
        { data: "unit_price" },
        { data: "shipping_quantity" },
      ],
      language: {
        url: "https://cdn.datatables.net/plug-ins/1.13.7/i18n/ja.json",
      },
    });
  });
</script>
{% endblock extra_js %}
